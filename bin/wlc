#!/usr/bin/env bash
if [[ "$1" == '--help' ]]; then
    echo '- Use it to create wireless adb connect'
    exit 0
fi

adb kill-server
adb start-server

echo '- Waititng for USB connected device...'
adb wait-for-usb-device
addr="$(adb shell ifconfig wlan0 | grep -w 'inet' | cut -d ' ' -f2 | awk -F ':' '{print $2}')"
adb tcpip 5555
read -p '- Disconect your device from USB and press [Enter]'
adb connect "$addr:5555"
